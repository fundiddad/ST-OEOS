# OEOS æ’ä»¶ï¼ˆSillyTavern æ‰©å±•ï¼‰

[English](README.md) | ç®€ä½“ä¸­æ–‡

ä¸€ä¸ªå°† AI å¯¹è¯è½¬åŒ–ä¸ºäº’åŠ¨å¼ OEOS æ¸¸æˆä½“éªŒçš„ SillyTavern æ‰©å±•ã€‚

**âš ï¸ æ³¨æ„**

**æœ¬é¡¹ç›®ç›®å‰ä»å¤„äºéå¸¸åˆçº§çš„é˜¶æ®µï¼ŒåŠŸèƒ½å°šä¸å®Œå–„ï¼Œå¯èƒ½å­˜åœ¨è®¸å¤šæœªé¢„è§çš„ Bugã€‚æ­¤å¤–ï¼Œé¡¹ç›®ä¸­çš„æ‰€æœ‰ä»£ç å‡ç”± AI ç”Ÿæˆï¼Œä»…ä¾›æŠ€æœ¯éªŒè¯å’Œäº¤æµã€‚è¯·è°¨æ…ä½¿ç”¨ã€‚**

åŒ…æ‹¬è¿™ä¸ªæ–‡æ¡£çš„å¤§éƒ¨åˆ†å†…å®¹ä¹Ÿæ˜¯AIç”Ÿæˆçš„ã€‚

å½“å‰è¿˜ä¸å¤„ç†ä¸çŸ¥é“æ€ä¹ˆå¦‚ä½•è®©AIåŠ å…¥å›¾ç‰‡ã€éŸ³é¢‘ï¼Œåªèƒ½å®ç°æ–‡å­—æ¸¸ç©ã€‚



## ç›®å½•

- [ä»€ä¹ˆæ˜¯ OEOSï¼Ÿ](#ä»€ä¹ˆæ˜¯-oeos)
- [ä»€ä¹ˆæ˜¯"åŸºäº AI çš„ OEOS"ï¼Ÿ](#ä»€ä¹ˆæ˜¯åŸºäº-ai-çš„-oeos)
- [å®‰è£…æ–¹æ³•](#å®‰è£…æ–¹æ³•)
- [æœªæ¥è®¡åˆ’](#æœªæ¥è®¡åˆ’)
- [å·¥ä½œåŸç†](#å·¥ä½œåŸç†)
- [æ ¸å¿ƒæ¨¡å—è¯´æ˜](#æ ¸å¿ƒæ¨¡å—è¯´æ˜)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [æ„å»ºæ–¹æ³•](#æ„å»ºæ–¹æ³•)
- [è‡´è°¢](#è‡´è°¢)

## ä»€ä¹ˆæ˜¯ OEOSï¼Ÿ

**OEOSï¼ˆErotic Obedience Scriptingï¼‰** æ˜¯ä¸€ç§äº’åŠ¨å¼è„šæœ¬æ ¼å¼ï¼Œæœ€åˆç”¨äº Milovana å¹³å°ï¼Œå¯ä»¥åˆ›å»ºåŒ…å«å¯¹è¯ã€é€‰æ‹©ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€è®¡æ—¶å™¨ç­‰ä¸°å¯Œäº¤äº’å…ƒç´ çš„äº’åŠ¨å†…å®¹ã€‚

**openOEOS** æ˜¯ç”± fapnip å¼€å‘çš„å¼€æº OEOS æ’­æ”¾å™¨ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ OEOS è„šæœ¬ã€‚

## ä»€ä¹ˆæ˜¯"åŸºäº AI çš„ OEOS"ï¼Ÿ

æœ¬æ’ä»¶å°† openOEOS æ’­æ”¾å™¨é›†æˆåˆ° SillyTavern ä¸­ï¼Œå¹¶å®ç°äº†ä¸€ä¸ªåˆ›æ–°åŠŸèƒ½ï¼š

- **AI è‡ªåŠ¨ç”Ÿæˆ OEOS å†…å®¹**ï¼šå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å›å¤ä¼šè¢«è‡ªåŠ¨è§£æä¸º OEOS é¡µé¢å’Œæ‘˜è¦
- **æŒä¹…åŒ–å­˜å‚¨**ï¼šç”Ÿæˆçš„å†…å®¹ä¿å­˜åˆ°è§’è‰²çš„ World Info ä¸­ï¼Œå¯ä»¥éšæ—¶è¯»å–å’Œç»§ç»­
- **å¯è§†åŒ–äº¤äº’**ï¼šé€šè¿‡ openOEOS æ’­æ”¾å™¨æ¸²æŸ“ï¼Œæä¾›å›¾å½¢åŒ–çš„æ¸¸æˆä½“éªŒ
- **æ™ºèƒ½é¢„ç”Ÿæˆ**ï¼šæ”¯æŒå¹¶å‘é¢„ç”Ÿæˆå¤šä¸ªé¡µé¢ï¼Œæå‡ä½“éªŒæµç•…åº¦






## å®‰è£…æ–¹æ³•


### å‰ç½®æ¡ä»¶

1. **å®‰è£…é…’é¦†åŠ©æ‰‹**
   - è¯·å…ˆç¡®ä¿å·²å®‰è£…"é…’é¦†åŠ©æ‰‹"æ’ä»¶
   - å‚è€ƒé“¾æ¥https://n0vi028.github.io/JS-Slash-Runner-Doc/


2. **å®‰è£… SPreset è„šæœ¬**
   - å®‰è£…"é…’é¦†åŠ©æ‰‹è„šæœ¬"ä¸­çš„ã€SPreset - é¢„è®¾å†…ç½®æ­£åˆ™ | å®åµŒå¥—â€¦ã€‘
   - å‚è€ƒé“¾æ¥ï¼šhttps://discord.com/channels/1134557553011998840/1407146985643053096

![alt text](readme_images/1.png)
3. **å¯¼å…¥é¢„è®¾æ–‡ä»¶**
   - å°† `oeos-st-extension/å°çŒ«ä¹‹ç¥-oeos.json` å¯¼å…¥åˆ°"é…’é¦†åŠ©æ‰‹"çš„ SPreset ä¸­

   ![alt text](readme_images/image.png)
   - æ„Ÿè°¢é¢„è®¾ä½œè€…ï¼šå°çŒ«ä¹‹ç¥
   - å‚è€ƒé“¾æ¥ï¼šhttps://discord.com/channels/1134557553011998840/1402584661208858635


### å®‰è£…æ‰©å±•

1. å°†oeos-st-extensionå¤åˆ¶åˆ°ä½ çš„ SillyTavern å®‰è£…ç›®å½•ï¼š
   ```
   SillyTavern/public/scripts/extensions/third-party/oeos-st-extension/
   ```
   å°±åƒæ˜¯è¿™æ ·ï¼š
   ![alt text](readme_images/image-1.png)

2. é‡å¯ SillyTavern

3. åœ¨"æ‰©å±•ç®¡ç† > ç¬¬ä¸‰æ–¹æ‰©å±•"ä¸­å¯ç”¨ "OEOS Interface"\\


![alt text](readme_images/image-2.png)

ç°åœ¨ä½ åº”è¯¥å¯ä»¥çœ‹è§è¾“å…¥æ¡†æ—è¾¹çš„ğŸš€æŒ‰é’®äº†ã€‚
![alt text](readme_images/image-3.png)

### ä½¿ç”¨æ–¹æ³•

1. åœ¨æ­¤ä¹‹å‰ï¼Œä½ åº”è¯¥å…ˆäº†è§£STçš„ä½¿ç”¨æ–¹æ³•ã€‚å‡†å¤‡å¥½ä¸€ä¸ªè§’è‰²å¡ã€ä»¥åŠAPIè¿æ¥ã€‚
![alt text](readme_images/image-4.png)
2. æŠŠè§’è‰²å¡çš„ç¬¬ä¸€æ¡ä¿¡æ¯è½¬ä¸ºOEOSè„šæœ¬æ ¼å¼
![alt text](readme_images/image-5.png)
ä½ å¯ä»¥ä½¿ç”¨AIï¼Œå°†[OESOè„šæœ¬æ–‡æ¡£](OEOScript_format_AI_zh.md)å’Œä½ çš„ç¬¬ä¸€æ¡ä¿¡æ¯å‘é€ç»™AIï¼Œè¦æ±‚å°†ç¬¬ä¸€æ¡ä¿¡æ¯æ”¹ä¸ºOEOSæ ¼å¼ï¼Œå¹¶ä¸”ä½¿ç”¨<game>ã€<Pages>ã€<summary>æ ‡ç­¾åŒ…è£¹ã€‚å°±åƒè¿™æ ·ï¼š
![alt text](readme_images/image-6.png)
3. ç‚¹å‡»è¾“å…¥æ¡†å·¦è¾¹çš„ç«ç®­å›¾æ ‡ï¼Œè¿›å…¥è§’è‰²é€‰æ‹©é¡µé¢ï¼Œå¹¶ä¸”å¯ç”¨åˆšæ‰çš„è§’è‰²ã€‚
![alt text](readme_images/image-7.png)
ç„¶åå˜æˆç»¿è‰²
![alt text](readme_images/image-8.png)
ç‚¹å‡»è¯¥è§’è‰²ï¼Œå°±èƒ½å¼€å§‹æ¸¸ç©äº†
![alt text](readme_images/image-9.png)
![alt text](readme_images/image-10.png)

## æœªæ¥è®¡åˆ’ï¼ˆç”»é¥¼ï¼‰

è®©æˆ‘ç”»ä¸ªé¥¼ï¼š

- **ğŸµ éŸ³é¢‘æ”¯æŒ**

- **ğŸ–¼ï¸ å›¾ç‰‡é›†æˆ**

- **âš¡ ä»£ç ä¼˜åŒ–**

- **âœ¨ åŠŸèƒ½å®Œå–„** 

## å·¥ä½œåŸç†ï¼ˆå¯¹äºå¼€å‘è€…ï¼‰

### æ•´ä½“æµç¨‹

1. **æ’ä»¶åŠ è½½**
   - SillyTavern å¯åŠ¨æ—¶åŠ è½½ OEOS æ‰©å±•
   - åœ¨èŠå¤©ç•Œé¢æ—è¾¹æ³¨å…¥ OEOS æ¸¸æˆé¢æ¿

2. **AI ç”Ÿæˆå†…å®¹**
   - å½“ AI å›å¤æ—¶ï¼Œæ’ä»¶è‡ªåŠ¨æå–å…¶ä¸­çš„ `<Pages>` å’Œ `<summary>` æ ‡ç­¾
   - è¿™äº›æ ‡ç­¾åŒ…å«äº† OEOS æ ¼å¼çš„æ¸¸æˆå†…å®¹ï¼ˆå¯¹è¯ã€é€‰é¡¹ã€å›¾ç‰‡ç­‰ï¼‰

3. **æ•°æ®æŒä¹…åŒ–**
   - æå–çš„å†…å®¹è‡ªåŠ¨ä¿å­˜åˆ°è§’è‰²ä¸“å±çš„ World Info ä¸­
   - ä¸‹æ¬¡æ‰“å¼€èŠå¤©æ—¶å¯ä»¥ç»§ç»­ä¹‹å‰çš„æ¸¸æˆè¿›åº¦

4. **æ¸¸æˆæ¸²æŸ“**
   - openOEOS æ’­æ”¾å™¨è¯»å–ä¿å­˜çš„å†…å®¹
   - å°†æ–‡æœ¬æ ¼å¼çš„ OEOS è„šæœ¬æ¸²æŸ“ä¸ºå¯äº¤äº’çš„æ¸¸æˆç•Œé¢
   - æ”¯æŒå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€è®¡æ—¶å™¨ç­‰å¤šåª’ä½“å…ƒç´ 

5. **æ™ºèƒ½é¢„ç”Ÿæˆ**
   - ç³»ç»Ÿå¯ä»¥å¹¶å‘é¢„ç”Ÿæˆå¤šä¸ªæ¸¸æˆé¡µé¢ï¼ˆæœ€å¤š 10 ä¸ªï¼‰
   - æå‰å‡†å¤‡åç»­å†…å®¹ï¼Œå‡å°‘ç­‰å¾…æ—¶é—´

### æŠ€æœ¯æ¶æ„

- **å‰ç«¯æ’­æ”¾å™¨**ï¼šåŸºäº Vue 2 + Vuetify çš„ openOEOS æ’­æ”¾å™¨
- **æ¡¥æ¥å±‚**ï¼šè¿æ¥ SillyTavern å’Œ openOEOSï¼Œå¤„ç†æ•°æ®æå–å’ŒåŒæ­¥
- **å¹¶å‘ç”Ÿæˆå™¨**ï¼šåˆ©ç”¨ SillyTavern çš„ API å®ç°å¤šé¡µé¢å¹¶å‘ç”Ÿæˆ

## æ ¸å¿ƒæ¨¡å—è¯´æ˜ï¼ˆå¯¹äºå¼€å‘è€…ï¼‰

### æ’ä»¶æ ¸å¿ƒæ–‡ä»¶ï¼ˆä½äº oeos-st-extension/ï¼‰

#### 1. å…¥å£å’ŒåŠ è½½æ¨¡å—

- **`manifest.json`**
  - SillyTavern æ‰©å±•æ¸…å•æ–‡ä»¶
  - å®šä¹‰æ‰©å±•åç§°ã€ç‰ˆæœ¬ã€ä½œè€…ã€å…¥å£æ–‡ä»¶ç­‰å…ƒæ•°æ®
  - æŒ‡å®š `loader.js` ä¸ºæ‰©å±•åŠ è½½å…¥å£

- **`loader.js`**
  - æ‰©å±•åŠ è½½å™¨ï¼ŒSillyTavern å¯åŠ¨æ—¶é¦–å…ˆæ‰§è¡Œæ­¤æ–‡ä»¶
  - å¯¼å…¥ `index.js` å¯åŠ¨æ•´ä¸ªæ’ä»¶

- **`index.js`**
  - ä¸»å…¥å£æ–‡ä»¶ï¼Œåˆå§‹åŒ–æ‰€æœ‰æ¨¡å—
  - è°ƒç”¨ `injectAndSetupSwapper()` æ³¨å…¥ UI
  - å¯¼å…¥ `plugin-bridge.js` å»ºç«‹æ¡¥æ¥å±‚

#### 2. UI å’Œç•Œé¢æ¨¡å—

- **`ui.js`**
  - è´Ÿè´£åœ¨ SillyTavern ç•Œé¢ä¸­æ³¨å…¥ OEOS æ¸¸æˆé¢æ¿
  - å®ç°èŠå¤©ç•Œé¢å’Œæ¸¸æˆç•Œé¢çš„åˆ‡æ¢é€»è¾‘
  - åŠ¨æ€åŠ è½½ openOEOS æ’­æ”¾å™¨çš„æ„å»ºäº§ç‰©ï¼ˆJS/CSSï¼‰
  - åˆ›å»ºåˆ‡æ¢æŒ‰é’®ï¼Œç®¡ç†ç•Œé¢æ˜¾ç¤º/éšè—

#### 3. æ ¸å¿ƒæ¡¥æ¥å’Œ API æ¨¡å—

- **`plugin-bridge.js`**
  - æ¡¥æ¥å±‚æ ¸å¿ƒï¼Œè¿æ¥ SillyTavern å’Œ openOEOS æ’­æ”¾å™¨
  - æš´éœ² `window.oeosApi` ä¾› Vue åº”ç”¨è°ƒç”¨
  - æä¾›ä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š
    - æ¸¸æˆæ•°æ®ç®¡ç†ï¼ˆé€šè¿‡ ElementDataManagerï¼‰
    - é¢„ç”Ÿæˆç³»ç»Ÿæ§åˆ¶
    - èŠå¤©å†å²æ§åˆ¶
    - é¢„è®¾è‡ªåŠ¨åˆ‡æ¢
    - å…¨å±€è®¾ç½®ç®¡ç†
  - ç›‘å¬ AI å›å¤äº‹ä»¶ï¼Œè‡ªåŠ¨æå–å’Œä¿å­˜æ¸¸æˆå†…å®¹

- **`st-api.js`**
  - SillyTavern API æŠ½è±¡å±‚
  - å°è£…å¯¹ SillyTavern æ ¸å¿ƒåŠŸèƒ½çš„è®¿é—®ï¼š
    - World Info è¯»å†™ï¼ˆ`saveWi`, `loadWi`ï¼‰
    - äº‹ä»¶ç›‘å¬ï¼ˆ`listenToAiResponse`ï¼‰
    - é¢„è®¾ç®¡ç†ï¼ˆ`getPresetByName`, `savePresetDirect`ï¼‰
  - æä¾›ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

#### 4. æ•°æ®ç®¡ç†æ¨¡å—

- **`element-data-manager.js`**
  - æ¸¸æˆæ•°æ®ç®¡ç†å™¨ï¼Œä½œä¸º OEOS æ¸¸æˆæ•°æ®çš„å•ä¸€æ•°æ®æº
  - ç®¡ç†ä»¥ä¸‹æ•°æ®ç»“æ„ï¼š
    - `pages`: é¡µé¢å†…å®¹ï¼ˆMap: pageId -> contentï¼‰
    - `summary`: é¡µé¢æ‘˜è¦ï¼ˆMap: pageId -> abstractï¼‰
    - `graph`: é¡µé¢å…³ç³»å›¾ï¼ˆMap: pageId -> [childIds]ï¼‰
    - `state`: å½“å‰æ¸¸æˆçŠ¶æ€
    - `dynamicContext`: åŠ¨æ€ä¸Šä¸‹æ–‡
  - åŠŸèƒ½ï¼š
    - ä»èŠå¤©æ¶ˆæ¯ä¸­æå– Pages å’Œ Summary
    - ä» World Info åŠ è½½æ¸¸æˆæ•°æ®
    - å¢é‡æ›´æ–°å’Œé˜²æŠ–åŒæ­¥åˆ° World Info
    - å·®å¼‚åŒ–åŒæ­¥åˆ°é¢„è®¾æ–‡ä»¶

- **`game-state.js`**
  - æ¸¸æˆçŠ¶æ€ç®¡ç†æ¨¡å—
  - è´Ÿè´£è¯»å†™ World Info ä¸­çš„æ¸¸æˆçŠ¶æ€
  - æ›´æ–°é¢„è®¾æ–‡ä»¶ä¸­çš„ XML æ ‡ç­¾å†…å®¹ï¼ˆGraphã€Stateã€Dynamic-Contextã€Summaryï¼‰
  - æä¾›é¡µé¢æ¡ç›®æ›´æ–°åŠŸèƒ½

- **`globalSettings.js`**
  - å…¨å±€è®¾ç½®ç®¡ç†æ¨¡å—
  - ç®¡ç†å›¾ç‰‡ã€éŸ³é¢‘ç­‰å…¨å±€å¼€å…³
  - ä½¿ç”¨ localStorage æŒä¹…åŒ–è®¾ç½®
  - æä¾›è®¾ç½®çš„è¯»å–ã€æ›´æ–°ã€é‡ç½®åŠŸèƒ½

#### 5. æ™ºèƒ½ç”Ÿæˆæ¨¡å—

- **`pregeneration.js`**
  - é¢„ç”Ÿæˆç³»ç»Ÿæ ¸å¿ƒæ¨¡å—
  - ç›‘å¬é¡µé¢å˜æ›´äº‹ä»¶ï¼Œè‡ªåŠ¨è§¦å‘é¢„ç”Ÿæˆ
  - åˆ†æå½“å‰é¡µé¢çš„è·³è½¬ç›®æ ‡ï¼ˆgoto è¯­å¥ï¼‰
  - æ™ºèƒ½é¢„ç”Ÿæˆæœªç”Ÿæˆçš„ç›®æ ‡é¡µé¢ï¼ˆæœ€å¤š 10 ä¸ªï¼‰
  - ç®¡ç†ç”Ÿæˆé˜Ÿåˆ—å’Œæ§½ä½ä½¿ç”¨

- **`concurrent-generator.js`**
  - å¹¶å‘ç”Ÿæˆå™¨ V1ï¼ˆquiet æ¨¡å¼ï¼‰
  - ä½¿ç”¨ SillyTavern çš„ quiet æ¨¡å¼ç”Ÿæˆ
  - ä¸ä¿å­˜åˆ°èŠå¤©è®°å½•
  - æ”¯æŒ 10 ä¸ªå¹¶å‘æ§½ä½ï¼ˆxb1-xb10ï¼‰

- **`concurrent-generator-v2.js`**
  - å¹¶å‘ç”Ÿæˆå™¨ V2ï¼ˆä¿å­˜åˆ°èŠå¤©ï¼‰
  - æ‰‹åŠ¨æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©å†å²
  - ç”Ÿæˆçš„å†…å®¹æ˜¾ç¤ºåœ¨èŠå¤©ç•Œé¢
  - æ”¯æŒ 10 ä¸ªå¹¶å‘æ§½ä½
  - å®Œå…¨ä½¿ç”¨ç”¨æˆ·çš„ API é…ç½®å’Œé¢„è®¾

#### 6. è¾…åŠ©åŠŸèƒ½æ¨¡å—

- **`chat-history-control.js`**
  - èŠå¤©å†å²æ§åˆ¶æ¨¡å—
  - æä¾›å¼€å¯/å…³é—­ Prompt Manager ä¸­ chatHistory çš„åŠŸèƒ½
  - ç”¨äºé¢„ç”Ÿæˆæ—¶ä¸´æ—¶ç¦ç”¨èŠå¤©å†å²ï¼Œé¿å…ä¸Šä¸‹æ–‡æ±¡æŸ“
  - æ”¯æŒé™é»˜åˆ‡æ¢ï¼ˆä¸è§¦å‘ UI æ›´æ–°ï¼‰

- **`preset-switcher.js`**
  - é¢„è®¾è‡ªåŠ¨åˆ‡æ¢æ¨¡å—
  - åœ¨åˆ‡æ¢è§’è‰²æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ° OEOS ä¸“ç”¨é¢„è®¾
  - ä¿å­˜å’Œæ¢å¤æ¯ä¸ªè§’è‰²çš„ä¸Šä¸€ä¸ªé¢„è®¾
  - ä½¿ç”¨ PresetManager API è¿›è¡Œé¢„è®¾åˆ‡æ¢

- **`debug-context-comparison.js`**
  - è°ƒè¯•å·¥å…·ï¼šä¸Šä¸‹æ–‡å¯¹æ¯”
  - å¯¹æ¯”å¹¶å‘ç”Ÿæˆå™¨å’Œ SillyTavern æ­£å¸¸ç”Ÿæˆçš„ä¸Šä¸‹æ–‡å·®å¼‚
  - åˆ†ææ¶ˆæ¯æ•°ç»„ã€è§’è‰²åˆ†å¸ƒã€World Info åŒ…å«æƒ…å†µ
  - æš´éœ² `window.debugContextComparison` ä¾›æ§åˆ¶å°è°ƒè¯•

#### 7. é…ç½®æ–‡ä»¶

- **`å°çŒ«ä¹‹ç¥-oeos.json`**
  - SPreset é¢„è®¾æ–‡ä»¶
  - åŒ…å« OEOS æ¸¸æˆæ‰€éœ€çš„æç¤ºè¯æ¨¡æ¿
  - å®šä¹‰ Graphã€Stateã€Dynamic-Contextã€Summary ç­‰ XML æ ‡ç­¾ç»“æ„
  - éœ€è¦å¯¼å…¥åˆ°"é…’é¦†åŠ©æ‰‹"çš„ SPreset ä¸­ä½¿ç”¨

### æ¨¡å—ä¾èµ–å…³ç³»

```
loader.js
  â””â”€> index.js
       â”œâ”€> ui.js (æ³¨å…¥ç•Œé¢)
       â””â”€> plugin-bridge.js (æ¡¥æ¥å±‚)
            â”œâ”€> st-api.js (ST API å°è£…)
            â”œâ”€> element-data-manager.js (æ•°æ®ç®¡ç†)
            â”œâ”€> game-state.js (çŠ¶æ€ç®¡ç†)
            â”œâ”€> globalSettings.js (å…¨å±€è®¾ç½®)
            â”œâ”€> chat-history-control.js (èŠå¤©å†å²æ§åˆ¶)
            â”œâ”€> preset-switcher.js (é¢„è®¾åˆ‡æ¢)
            â””â”€> pregeneration.js (é¢„ç”Ÿæˆç³»ç»Ÿ)
                 â”œâ”€> concurrent-generator.js (V1)
                 â””â”€> concurrent-generator-v2.js (V2)
```
## é¡¹ç›®ç»“æ„ï¼ˆå¯¹äºå¼€å‘è€…ï¼‰

```
src/
â”œâ”€â”€ oeos-st-extension/             # å®Œæ•´çš„ OEOS æ’ä»¶ï¼ˆåŒ…å«æ ¸å¿ƒæ–‡ä»¶ + æ„å»ºäº§ç‰©ï¼‰
â”‚   â”œâ”€â”€ manifest.json              # æ‰©å±•æ¸…å•æ–‡ä»¶
â”‚   â”œâ”€â”€ loader.js                  # æ‰©å±•åŠ è½½å™¨å…¥å£
â”‚   â”œâ”€â”€ index.js                   # ä¸»å…¥å£ï¼Œåˆå§‹åŒ–æ‰€æœ‰æ¨¡å—
â”‚   â”œâ”€â”€ ui.js                      # UI æ³¨å…¥å’Œç•Œé¢åˆ‡æ¢é€»è¾‘
â”‚   â”œâ”€â”€ plugin-bridge.js           # æ¡¥æ¥å±‚ï¼Œæš´éœ² window.oeosApi
â”‚   â”œâ”€â”€ st-api.js                  # SillyTavern API æŠ½è±¡å±‚
â”‚   â”œâ”€â”€ element-data-manager.js    # æ¸¸æˆæ•°æ®ç®¡ç†å™¨ï¼ˆå•ä¸€æ•°æ®æºï¼‰
â”‚   â”œâ”€â”€ game-state.js              # æ¸¸æˆçŠ¶æ€ç®¡ç†ï¼ˆè¯»å†™ World Infoï¼‰
â”‚   â”œâ”€â”€ globalSettings.js          # å…¨å±€è®¾ç½®ç®¡ç†ï¼ˆå›¾ç‰‡/éŸ³é¢‘å¼€å…³ï¼‰
â”‚   â”œâ”€â”€ chat-history-control.js    # èŠå¤©å†å²æ§åˆ¶æ¨¡å—
â”‚   â”œâ”€â”€ preset-switcher.js         # é¢„è®¾è‡ªåŠ¨åˆ‡æ¢é€»è¾‘
â”‚   â”œâ”€â”€ pregeneration.js           # é¢„ç”Ÿæˆç³»ç»Ÿæ ¸å¿ƒ
â”‚   â”œâ”€â”€ concurrent-generator.js    # å¹¶å‘ç”Ÿæˆå™¨ V1ï¼ˆquiet æ¨¡å¼ï¼‰
â”‚   â”œâ”€â”€ concurrent-generator-v2.js # å¹¶å‘ç”Ÿæˆå™¨ V2ï¼ˆä¿å­˜åˆ°èŠå¤©ï¼‰
â”‚   â”œâ”€â”€ debug-context-comparison.js# è°ƒè¯•å·¥å…·ï¼šä¸Šä¸‹æ–‡å¯¹æ¯”
â”‚   â”œâ”€â”€ å°çŒ«ä¹‹ç¥-oeos.json         # SPreset é¢„è®¾æ–‡ä»¶
â”‚   â”œâ”€â”€ README.md                  # æ’ä»¶æ–‡æ¡£
â”‚   â”‚
â”‚   â”œâ”€â”€ js/                        # Vue æ„å»ºäº§ç‰©ï¼ˆç”± deploy.js è‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”‚   â”œâ”€â”€ app.js                 # Vue åº”ç”¨ä¸»æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ app.js.map             # Source map
â”‚   â”œâ”€â”€ fonts/                     # å­—ä½“æ–‡ä»¶ï¼ˆæ„å»ºäº§ç‰©ï¼‰
â”‚   â”œâ”€â”€ crsp/                      # CRSP æ¨¡å—ï¼ˆæ„å»ºäº§ç‰©ï¼‰
â”‚   â”œâ”€â”€ index.html                 # Vue åº”ç”¨å…¥å£ï¼ˆæ„å»ºäº§ç‰©ï¼‰
â”‚   â”œâ”€â”€ bg-texture.png             # èƒŒæ™¯çº¹ç†ï¼ˆæ„å»ºäº§ç‰©ï¼‰
â”‚   â”œâ”€â”€ favicon.ico                # å›¾æ ‡ï¼ˆæ„å»ºäº§ç‰©ï¼‰
â”‚   â””â”€â”€ loading.gif                # åŠ è½½åŠ¨ç”»ï¼ˆæ„å»ºäº§ç‰©ï¼‰
â”‚
â”œâ”€â”€ openeos-master/                # openOEOS æ’­æ”¾å™¨ï¼ˆVue 2 é¡¹ç›®ï¼‰
â”‚   â”œâ”€â”€ src/                       # Vue æºä»£ç 
â”‚   â”œâ”€â”€ public/                    # é™æ€èµ„æº
â”‚   â”œâ”€â”€ dist/                      # æ„å»ºè¾“å‡ºï¼ˆä¸´æ—¶ç›®å½•ï¼Œä¼šè¢«å¤åˆ¶åˆ° oeos-st-extension/ï¼‰
â”‚   â”œâ”€â”€ package.json               # ä¾èµ–å’Œæ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ vue.config.js              # Webpack é…ç½®
â”‚   â”œâ”€â”€ deploy.js                  # éƒ¨ç½²è„šæœ¬ï¼ˆæ–°æµç¨‹ï¼šå…ˆåˆå¹¶åˆ° oeos-st-extensionï¼Œå†å¤åˆ¶åˆ° STï¼‰
â”‚   â””â”€â”€ README.md                  # openOEOS æ’­æ”¾å™¨æ–‡æ¡£
â”‚
â”œâ”€â”€ SillyTavern-release/           # SillyTavern å®‰è£…ç›®å½•ï¼ˆä¸è·Ÿè¸ªï¼‰
â”‚   â””â”€â”€ public/scripts/extensions/third-party/
â”‚       â””â”€â”€ oeos-st-extension/     # æœ€ç»ˆéƒ¨ç½²ä½ç½®ï¼ˆä» src/oeos-st-extension/ å¤åˆ¶ï¼‰
â”‚
â”œâ”€â”€ package.json                   # æ ¹é¡¹ç›®ä¾èµ–
â”œâ”€â”€ README.md                      # è‹±æ–‡æ–‡æ¡£
â””â”€â”€ README_CN.md                   # ä¸­æ–‡æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

## æ„å»ºæ–¹æ³•ï¼ˆå¯¹äºå¼€å‘è€…ï¼‰

### ç¯å¢ƒè¦æ±‚

- Node.js 14+ å’Œ npm
- å·²å®‰è£… SillyTavernï¼ˆä½äº `src/SillyTavern-release/`ï¼‰

### æ„å»ºæ­¥éª¤

1. **å®‰è£…ä¾èµ–**
   ```bash
   cd src/openeos-master
   npm install
   ```

2. **æ„å»ºé¡¹ç›®**
   ```bash
   npm run build
   ```

   æ„å»ºè¿‡ç¨‹ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
   - ä½¿ç”¨ Vue CLI ç¼–è¯‘ openOEOS æ’­æ”¾å™¨ï¼ˆè¾“å‡ºåˆ° `dist/`ï¼‰
   - æ‰§è¡Œ `deploy.js` è„šæœ¬ï¼š
     1. å°† `dist/` æ„å»ºäº§ç‰©åˆå¹¶åˆ° `src/oeos-st-extension/`ï¼ˆä½¿å…¶æˆä¸ºå®Œæ•´æ’ä»¶ï¼‰
     2. å°†å®Œæ•´çš„ `src/oeos-st-extension/` å¤åˆ¶åˆ° SillyTavern ç›®å½•

   æœ€ç»ˆè¾“å‡ºä½ç½®ï¼š
   ```
   src/oeos-st-extension/                                                      # å®Œæ•´æ’ä»¶ï¼ˆåŒ…å«æ„å»ºäº§ç‰©ï¼‰
   src/SillyTavern-release/public/scripts/extensions/third-party/oeos-st-extension/  # SillyTavern éƒ¨ç½²ä½ç½®
   ```


### æ„å»ºè¯´æ˜

- **æ’ä»¶æºç›®å½•**ï¼š`src/oeos-st-extension/` ç°åœ¨æ˜¯å®Œæ•´çš„æ’ä»¶æ–‡ä»¶å¤¹ï¼ˆåŒ…å«æ ¸å¿ƒæ–‡ä»¶ + æ„å»ºäº§ç‰©ï¼‰
- **ä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹** `SillyTavern-release/public/scripts/extensions/third-party/oeos-st-extension/` ç›®å½•
- **ä¿®æ”¹æ’ä»¶æ ¸å¿ƒæ–‡ä»¶**ï¼šåœ¨ `src/oeos-st-extension/` ä¸­ä¿®æ”¹ `.js` æ–‡ä»¶
- **ä¿®æ”¹ Vue æ’­æ”¾å™¨ä»£ç **ï¼šåœ¨ `src/openeos-master/src/` ä¸­ä¿®æ”¹
- **æ¯æ¬¡æ„å»º**ï¼š
  1. å…ˆå°†æ„å»ºäº§ç‰©åˆå¹¶åˆ° `src/oeos-st-extension/`
  2. å†å°†å®Œæ•´æ’ä»¶å¤åˆ¶åˆ° SillyTavern æ‰©å±•ç›®å½•
- **Git è·Ÿè¸ª**ï¼š`src/oeos-st-extension/` ä¸­çš„æ„å»ºäº§ç‰©ä¹Ÿä¼šè¢«æäº¤åˆ° Git

## è‡´è°¢

- [openOEOS](https://github.com/fapnip/openeos) - ä¼˜ç§€çš„å¼€æº OEOS æ’­æ”¾å™¨
- å°çŒ«ä¹‹ç¥ - æä¾› SPreset é¢„è®¾è§„åˆ™å’Œç¤ºä¾‹

## è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ªç›¸åº”çš„å¼€æºè®¸å¯è¯ï¼Œè¯¦è§å„å­é¡¹ç›®çš„ LICENSE æ–‡ä»¶ã€‚

